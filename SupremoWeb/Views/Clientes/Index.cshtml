<h1>Clientes</h1>

@section Scripts {
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet" />

    <script>
        $(document).ready(function () {
            $('#clientesTable').DataTable({
                "language": {
                    "paginate": {
                        "previous": "Anterior",
                        "next": "Próximo"
                    },
                    "lengthMenu": "Exibir _MENU_ registros por página",
                    "info": "Exibindo _START_ a _END_ de _TOTAL_ registros",
                    "infoEmpty": "Sem registros disponíveis",
                    "infoFiltered": "(filtrado de _MAX_ registros totais)",
                    "search": "Pesquisar:"
                },
                "searching": false,                                 // Desabilita a função de pesquisa
                "lengthMenu": [[5, 10, 20, 50], [5, 10, 20, 50]],   // Define as opções de número de registros por página
                "pageLength": 10                                    // Define o número padrão de registros por página
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-the-mask@0.11.1/dist/vue-the-mask.js"></script>
    <script>
        Vue.use(VueTheMask);
        new Vue({
            el: '#formIncluirCliente'
        });
    </script>
}

@{
    IEnumerable<NodeModel> clientes = ViewBag.Clientes;
}

<style>
    #botaoredondoincluir {
        color: grey;
        background: white;
        font-size: 70px;
        font-family: serif;
        position: absolute;
        top: 70px;
        right: 30px;
    }
</style>

<div id="botaoredondoincluir">
    <a href="@Url.Action("IncluirCliente", "Clientes")" class="btn btn-outline-primary btn-sm" style="border-radius: 50%; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center;">
        <i class="fas fa-plus" style="color: blue;"></i>
    </a>
</div>

<div class="row">
    <div class="col-md-6 mb-2">
        <div class="d-flex justify-content-start">
            <!-- Botão de Pesquisa -->
            <form class="d-flex me-2">
                <div style="width: 200px; margin-right: 5px;">
                    <input class="form-control form-control-sm" type="search" placeholder="Pesquisa" aria-label="Pesquisa">
                </div>
                <div style="margin: 0px;">
                    <button class="btn btn-outline-success btn-sm" type="submit">Pesquisar</button>
                </div>
            </form>

            <!-- Botão para abrir os filtros -->
            <div style="margin: 0px;">
                <a class="btn btn-outline-primary btn-sm " data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">Abrir Filtros</a>
            </div>

            <!-- Botão Fechar com redirecionamento -->
            <div style="margin-left: 5px;">
                <a href="/home" class="btn btn-outline-danger btn-sm">Fechar</a>
            </div>
        </div>
    </div>
</div>

<div class="collapse mt-2" id="collapseExample">

    <div class="card">
        <div class="card-header">Ordenado por</div>
        <div class="card-body">
            <div class="row">

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">Código</label>
                </div>

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">Razão</label>
                </div>

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">Fantasia</label>
                </div>

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">Bairro</label>
                </div>

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">Cidade</label>
                </div>

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">Estado</label>
                </div>

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">CPF/CNPJ</label>
                </div>

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">RG/I.E</label>
                </div>

                <div class="col">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">Ramo</label>
                </div>

            </div>

        </div>
    </div>

    <div class="card mt-1">
        <div class="card-header">Filtrado por</div>
        <div class="card-body">

            <form class="row g-3" id="formIncluirCliente">
                <div class="col-md-1">
                    <label for="inputEmail4" class="form-label">Empresa</label>
                    <input type="text" class="form-control form-control-sm" id="inputEmail4">
                </div>
                <div class="col-md-4">
                    <label for="inputPassword4" class="form-label">Cliente</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>
                <div class="col-md-4">
                    <label for="inputPassword4" class="form-label">Razão</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>
                <div class="col-md-3">
                    <label for="inputPassword4" class="form-label">Fantasia</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>

                <div class="col-md-1">
                    <label for="inputEmail4" class="form-label">Endereço</label>
                    <input type="text" class="form-control form-control-sm" id="inputEmail4">
                </div>
                <div class="col-md-4">
                    <label for="inputPassword4" class="form-label">Bairro</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>
                <div class="col-md-4">
                    <label for="inputPassword4" class="form-label">Cidade</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>
                <div class="col-md-3">
                    <label for="inputState" class="form-label">UF</label>
                    <select id="inputState" class="form-select form-select-sm">
                        <option selected>Escolha...</option>
                        @foreach (var estado in ViewBag.EstadosBrasileiros as List<SelectListItem>)
                        {
                            <option value="@estado.Value">@estado.Text</option>
                        }
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="inputPassword4" class="form-label">CPF/CNPJ</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>

                <div class="col-md-4">
                    <label for="inputEmail4" class="form-label">RG/I.E</label>
                    <input type="text" class="form-control form-control-sm" id="inputEmail4">
                </div>
                <div class="col-md-4">
                    <label for="inputPassword4" class="form-label">Vendedor</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>
                <div class="col-md-4">
                    <label for="inputPassword4" class="form-label">Telefone</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4" v-mask="'########'">
                </div>

                <div class="col-md-3">
                    <label for="inputEmail4" class="form-label">Ramo</label>
                    <input type="text" class="form-control form-control-sm" id="inputEmail4">
                </div>
                <div class="col-md-3">
                    <label for="inputPassword4" class="form-label">Setor Comercial</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>
                <div class="col-md-3">
                    <label for="inputState" class="form-label">Atuação</label>
                    <select id="inputState" class="form-select form-select-sm">
                        <option selected>Escolha...</option>
                        @foreach (var atuacao in ViewBag.Atuacao as List<SelectListItem>)
                        {
                            <option value="@atuacao.Value">@atuacao.Text</option>
                        }
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="inputPassword4" class="form-label">Rota</label>
                    <input type="text" class="form-control form-control-sm" id="inputPassword4">
                </div>
            </form>


        </div>
    </div>

</div>

<div class="table-responsive" style="height: 300px; overflow-y: auto;">
    <table id="clientesTable" class="table table-sm">
        <thead class="table-floating-header">
            <tr>
                <th scope="col">Ação</th>
                <th scope="col">Empresa</th>
                <th scope="col">Código</th>
                <th scope="col">Razão</th>
                <th scope="col">Fantasia</th>
                <th scope="col">CPF/CNPJ</th>
                <th scope="col">RG/Insc. Estadual</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var cliente in clientes)
            {
                <tr>
                    <td>
                        <div align="center" style="white-space: nowrap;">
                            <a href="@Url.Action("Procurar", "Clientes", new { id =@cliente.id })" title="Procurar"><i class="fas fa-search"></i></a>
                            <a href="@Url.Action("Editar", "Clientes", new { id = @cliente.id })" title="Editar"><i class="fa fa-pencil-alt"></i></a>
                            <a href="@Url.Action("Excluir", "Clientes", new { id = @cliente.id })" title="Excluir" onclick="return confirm('Tem certeza que deseja excluir este cliente?');"><i class="fa fa-trash-alt"></i></a>
                        </div>
                    </td>
                    <td>@cliente.companyName</td>
                    <td>@cliente.id</td>
                    <td>@cliente.companyName</td>
                    <td>@cliente.tradingName</td>
                    <td>@cliente.taxPayerNumber</td>
                    <td>@cliente.identificationCard</td>
                </tr>
            }
        </tbody>
    </table>
</div>
</div>

<!-- Adicione um elemento modal em algum lugar do seu código -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Título da modal</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
                <!-- Conteúdo da sua modal -->
                ...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary">Salvar mudanças</button>
            </div>
        </div>
    </div>
</div>

<!-- Adicione este script para abrir a modal quando o input for clicado -->
<script>
    document.getElementById('inputEmail4').addEventListener('click', function () {
        var myModal = new bootstrap.Modal(document.getElementById('myModal'));
        myModal.show();
    });
</script>

<script>
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            var forms = document.getElementsByClassName('needs-validation');
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>


